# âœ… FLOW Má»šI - ÄÄ‚NG KÃ WALK-IN (ÄÃšNG YÃŠU Cáº¦U)

## ğŸ¯ FLOW HOÃ€N TOÃ€N Má»šI

### **BÆ°á»›c 1: Trang chá»n loáº¡i khÃ¡m (TRANG Äáº¦U TIÃŠN)**
```
URL: /schedule/select-type
TiÃªu Ä‘á»: "ÄÄƒng kÃ½ khÃ¡m Walk-in"
```

**MÃ n hÃ¬nh:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ÄÄƒng kÃ½ khÃ¡m Walk-in                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Chá»n loáº¡i khÃ¡m: *                       â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â— KhÃ¡m thÆ°á»ng                       â”‚ â”‚
â”‚ â”‚   ÄÄƒng kÃ½ khÃ¡m bá»‡nh thÃ´ng thÆ°á»ng    â”‚ â”‚
â”‚ â”‚   vá»›i bÃ¡c sÄ© chuyÃªn khoa            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â—‹ KhÃ¡m theo gÃ³i                     â”‚ â”‚
â”‚ â”‚   ÄÄƒng kÃ½ gÃ³i khÃ¡m sá»©c khá»e         â”‚ â”‚
â”‚ â”‚   tá»•ng quÃ¡t hoáº·c chuyÃªn sÃ¢u         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ [Quay láº¡i] [Tiáº¿p tá»¥c]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

KHÃ”NG cÃ³ lá»‹ch lÃ m viá»‡c bÃ¡c sÄ©!
KHÃ”NG cÃ³ form Ä‘Äƒng kÃ½!
CHá»ˆ cÃ³ 2 radio button chá»n loáº¡i!
```

---

### **BÆ°á»›c 2a: Chá»n "KhÃ¡m thÆ°á»ng" â†’ Chuyá»ƒn Ä‘áº¿n lá»‹ch bÃ¡c sÄ©**
```
URL: /schedule
```

**MÃ n hÃ¬nh:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ÄÄƒng kÃ½ khÃ¡m Walk-in - KhÃ¡m thÆ°á»ng      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BÃ¡c sÄ©: [BS.Vanh Le - Máº¯t â–¼]           â”‚
â”‚ NgÃ y: [31/10/2025]  [HÃ´m nay]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BS.Vanh Le                           31 â”‚
â”‚ Máº¯t                       ThÃ¡ng 10/2025 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 08:00  ÄÃ£ qua (khÃ´ng thá»ƒ Ä‘áº·t)           â”‚
â”‚ 09:00  ÄÃ£ qua (khÃ´ng thá»ƒ Ä‘áº·t)           â”‚
â”‚ 10:00  Slot trá»‘ng                       â”‚
â”‚        [+ ThÃªm bá»‡nh nhÃ¢n] â† NÃšT XANH   â”‚
â”‚ 11:00  Slot trá»‘ng                       â”‚
â”‚        [+ ThÃªm bá»‡nh nhÃ¢n]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Click "ThÃªm bá»‡nh nhÃ¢n" â†’ Form nhÆ° CÅ¨ (khÃ´ng cÃ³ "Loáº¡i khÃ¡m")**

---

### **BÆ°á»›c 2b: Chá»n "KhÃ¡m theo gÃ³i" â†’ Chuyá»ƒn Ä‘áº¿n form Ä‘Äƒng kÃ½ gÃ³i**
```
URL: /schedule/register-package
```

**MÃ n hÃ¬nh:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ÄÄƒng kÃ½ GÃ³i khÃ¡m Walk-in                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Chá»n gÃ³i khÃ¡m: *                        â”‚
â”‚ [GÃ³i khÃ¡m tá»•ng quÃ¡t - Nam â–¼]           â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ GÃ³i khÃ¡m sá»©c khá»e tá»•ng quÃ¡t - Nam   â”‚ â”‚
â”‚ â”‚ âœ“ Äiá»‡n tim ECG                      â”‚ â”‚
â”‚ â”‚ âœ“ XÃ©t nghiá»‡m mÃ¡u                    â”‚ â”‚
â”‚ â”‚ âœ“ KhÃ¡m ná»™i khoa                     â”‚ â”‚
â”‚ â”‚ Tá»•ng: 6,180,000 Ä‘                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Loáº¡i bá»‡nh nhÃ¢n: *                       â”‚
â”‚ â— Bá»‡nh nhÃ¢n cÅ©  â—‹ Bá»‡nh nhÃ¢n má»›i        â”‚
â”‚                                         â”‚
â”‚ Chá»n bá»‡nh nhÃ¢n: *                       â”‚
â”‚ [Nguyá»…n VÄƒn A (BN001) â–¼]               â”‚
â”‚                                         â”‚
â”‚ NgÃ y khÃ¡m dá»± kiáº¿n: *                    â”‚
â”‚ [31/10/2025]                            â”‚
â”‚                                         â”‚
â”‚ LÃ½ do khÃ¡m / Ghi chÃº:                   â”‚
â”‚ [_________________________________]     â”‚
â”‚                                         â”‚
â”‚ [Há»§y] [XÃ¡c nháº­n Ä‘Äƒng kÃ½]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

KHÃ”NG cáº§n chá»n bÃ¡c sÄ©!
KHÃ”NG cáº§n chá»n giá»!
Há»‡ thá»‘ng sáº½ phÃ¢n cÃ´ng bÃ¡c sÄ© sau!
```

---

## ğŸ“ FILES Má»šI

### **1. select_type.php** (Trang chá»n loáº¡i)
```
Path: app/Views/schedule/select_type.php
Chá»©c nÄƒng:
- Hiá»ƒn thá»‹ 2 radio button: KhÃ¡m thÆ°á»ng / KhÃ¡m theo gÃ³i
- Click "Tiáº¿p tá»¥c":
  + Náº¿u chá»n "KhÃ¡m thÆ°á»ng" â†’ /schedule
  + Náº¿u chá»n "KhÃ¡m theo gÃ³i" â†’ /schedule/register-package
```

### **2. register_package.php** (Form Ä‘Äƒng kÃ½ gÃ³i)
```
Path: app/Views/schedule/register_package.php
Chá»©c nÄƒng:
- Chá»n gÃ³i khÃ¡m
- Chá»n bá»‡nh nhÃ¢n (cÅ©/má»›i)
- Chá»n ngÃ y khÃ¡m
- Nháº­p lÃ½ do
- Submit â†’ Táº¡o appointment gÃ³i
```

### **3. index.php** (Lá»‹ch bÃ¡c sÄ© - GIá»® NGUYÃŠN)
```
Path: app/Views/schedule/index.php
Chá»©c nÄƒng:
- Chá»n bÃ¡c sÄ© + ngÃ y
- Xem lá»‹ch lÃ m viá»‡c
- Click "ThÃªm bá»‡nh nhÃ¢n" â†’ /schedule/add-patient
```

### **4. add_patient.php** (Form khÃ¡m thÆ°á»ng - XÃ“A "Loáº¡i khÃ¡m")
```
Path: app/Views/schedule/add_patient.php
Chá»©c nÄƒng:
- XÃ“A pháº§n "Loáº¡i khÃ¡m" (khÃ´ng cáº§n ná»¯a)
- Chá»‰ cÃ³: Chá»n bá»‡nh nhÃ¢n + LÃ½ do
- Submit â†’ Táº¡o appointment thÆ°á»ng
```

---

## ğŸ”„ SO SÃNH

### **TrÆ°á»›c (Sai):**
```
1. VÃ o /schedule â†’ Tháº¥y lá»‹ch bÃ¡c sÄ©
2. Click "ThÃªm bá»‡nh nhÃ¢n"
3. Form cÃ³ "Loáº¡i khÃ¡m" (ThÆ°á»ng/GÃ³i)
4. Chá»n gÃ³i â†’ Váº«n á»Ÿ form nÃ y
```

### **Sau (ÄÃºng):**
```
1. VÃ o /schedule/select-type
2. Chá»n loáº¡i: ThÆ°á»ng HOáº¶C GÃ³i
3a. Náº¿u ThÆ°á»ng â†’ /schedule (lá»‹ch bÃ¡c sÄ©)
3b. Náº¿u GÃ³i â†’ /schedule/register-package (form gÃ³i)
```

---

## âš™ï¸ Cáº¦N THÃŠM ROUTES

### **File: public/index.php**
```php
// Trang chá»n loáº¡i khÃ¡m
} elseif ($path === '/schedule/select-type') {
    Auth::requireRole(['receptionist']);
    require_once APP_PATH . '/Views/schedule/select_type.php';

// Trang Ä‘Äƒng kÃ½ gÃ³i walk-in
} elseif ($path === '/schedule/register-package') {
    Auth::requireRole(['receptionist']);
    require_once APP_PATH . '/Views/schedule/register_package.php';

// Xá»­ lÃ½ submit Ä‘Äƒng kÃ½ gÃ³i walk-in
} elseif ($path === '/schedule/store-package-walkin' && $_SERVER['REQUEST_METHOD'] === 'POST') {
    Auth::requireRole(['receptionist']);
    require_once APP_PATH . '/Controllers/ScheduleController.php';
    $controller = new ScheduleController();
    $controller->storePackageWalkin();
```

---

## ğŸ”§ Sá»¬A FILE CÅ¨

### **1. Sá»­a menu sidebar**
```php
// Thay Ä‘á»•i link "ÄÄƒng kÃ½ khÃ¡m Walk-in"
<a href="<?= APP_URL ?>/schedule/select-type">
    ÄÄƒng kÃ½ khÃ¡m Walk-in
</a>
```

### **2. Sá»­a add_patient.php**
```php
// XÃ“A pháº§n nÃ y:
<!-- Chá»n loáº¡i khÃ¡m -->
<div class="mb-6">
    <label>Loáº¡i khÃ¡m *</label>
    â— KhÃ¡m thÆ°á»ng
    â—‹ KhÃ¡m theo gÃ³i
</div>

// GIá»® Láº I:
- Chá»n bá»‡nh nhÃ¢n (cÅ©/má»›i)
- LÃ½ do khÃ¡m
- Triá»‡u chá»©ng
```

---

## ğŸš€ HÃ€NH Äá»˜NG

### **BÆ°á»›c 1: ThÃªm routes**
```
Má»Ÿ: public/index.php
ThÃªm 3 routes má»›i (xem pháº§n trÃªn)
```

### **BÆ°á»›c 2: Sá»­a menu**
```
Má»Ÿ: app/Views/layouts/main.php
Sá»­a link "ÄÄƒng kÃ½ khÃ¡m Walk-in" â†’ /schedule/select-type
```

### **BÆ°á»›c 3: Sá»­a add_patient.php**
```
Má»Ÿ: app/Views/schedule/add_patient.php
XÃ³a pháº§n "Loáº¡i khÃ¡m"
```

### **BÆ°á»›c 4: Test**
```
1. VÃ o /schedule/select-type
2. Tháº¥y 2 option: ThÆ°á»ng / GÃ³i
3. Chá»n ThÆ°á»ng â†’ Chuyá»ƒn /schedule
4. Chá»n GÃ³i â†’ Chuyá»ƒn /schedule/register-package
```

---

## ğŸ“Š Káº¾T QUáº¢ MONG Äá»¢I

### **Trang select-type:**
```
âœ“ 2 radio button lá»›n, Ä‘áº¹p
âœ“ MÃ´ táº£ rÃµ rÃ ng
âœ“ Click "Tiáº¿p tá»¥c" â†’ Chuyá»ƒn trang Ä‘Ãºng
```

### **Trang register-package:**
```
âœ“ Chá»n gÃ³i â†’ Hiá»‡n dá»‹ch vá»¥ + giÃ¡
âœ“ Chá»n bá»‡nh nhÃ¢n (cÅ©/má»›i)
âœ“ Chá»n ngÃ y khÃ¡m
âœ“ Submit â†’ Táº¡o appointment gÃ³i
```

---

**ThÃªm routes vÃ  test ngay!** ğŸš€
